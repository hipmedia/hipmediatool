<!DOCTYPE html>
<html lang="vi">
<head>
  <!-- Bootstrap & jQuery -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    body {
  margin: 0;
  font-family: 'Roboto', sans-serif;
  background: linear-gradient(to bottom, #ffecd2, #fcb69f);
  color: #8b0000;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  overflow-x: hidden;
  padding: 5vh 5vw;
  position: relative;
  box-sizing: border-box;
}

    h1 {
  font-family: 'Pacifico', cursive;
  font-size: clamp(2.2rem, 5vw, 3.2rem);
  margin-bottom: 40px;
  color: #d60000;
  text-shadow: 3px 3px 6px rgba(255, 200, 200, 0.8);
  line-height: 1.4;
}

    #countdown {
  display: flex;
  gap: 4vw;
  font-size: clamp(1rem, 3vw, 1.5rem);
  font-weight: bold;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 5vh;
  width: 100%;
  max-width: 900px;
}

    .time-box {
  background-color: rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  padding: 3vh 2vw;
  flex: 1 1 100px;
  text-align: center;
  box-shadow: 0 0 10px #ffcc00;
  min-width: 80px;
  max-width: 180px;
}

    .time-box span.value {
  font-size: clamp(2rem, 5vw, 3rem);
  display: block;
  color: #ffffff;
}

    .time-box span.label {
      font-size: 0.9rem;
      color: #8b0000;
    }

    #toggleMusic {
  background: transparent;
  color: #8b0000;
  border: none;
  cursor: pointer;
  box-shadow: none;
  z-index: 3;
  position: absolute;
  right: 1rem;
  top: 1rem;
  font-size: 1.8rem;
}

    #fireworks {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle, #2e0000 0%, #000000 100%);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      overflow: hidden;
    }

    #fireworksCanvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1;
    }

    #fireworks .content {
      z-index: 2;
      text-align: center;
      animation: zoomIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    #fireworks h1 {
      font-size: clamp(3rem, 8vw, 6rem);
      color: #ffeb3b;
      text-shadow: 0 0 15px #ff5722, 0 0 30px #d50000;
      margin-bottom: 10px;
    }

    #fireworks p {
      font-family: 'Pacifico', cursive;
      font-size: clamp(1.5rem, 4vw, 2.5rem);
      color: #fff;
      text-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }

    @keyframes zoomIn {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    #bottom-image {
  width: 550px;
  max-width: 95vw;
  z-index: 1;
  opacity: 0.97;
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}
  
</style>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Đếm Ngược Tết Nguyên Đán 2026</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto&display=swap" rel="stylesheet">
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./assets/img/tet.png" type="image/png">
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta name="theme-color" content="#fcb69f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Tết 2026">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <meta property="og:title" content="Đếm Ngược Tết Nguyên Đán 2026">
  <meta property="og:description" content="Cùng đếm ngược đến thời khắc giao thừa năm 2026 và tận hưởng không khí Tết sum vầy!">
  <meta property="og:image" content="https://i.imgur.com/mZwzYqS.png">
  <meta property="og:type" content="website">
</head>
<body class="container-fluid px-3 px-md-5">
  <h1>Đếm Ngược<br />Tết Nguyên Đán 2026</h1>
  <div id="countdown" class="w-100">
    <div class="time-box">
      <span class="value" id="days">00</span>
      <span class="label">Ngày</span>
    </div>
    <div class="time-box">
      <span class="value" id="hours">00</span>
      <span class="label">Giờ</span>
    </div>
    <div class="time-box">
      <span class="value" id="minutes">00</span>
      <span class="label">Phút</span>
    </div>
    <div class="time-box">
      <span class="value" id="seconds">00</span>
      <span class="label">Giây</span>
    </div>
  </div>
  <button id="toggleMusic"><i class="fas fa-volume-up"></i></button>
  <div id="fireworks">
    <canvas id="fireworksCanvas"></canvas>
    <div class="content">
      <h1>CHÚC MỪNG NĂM MỚI</h1>
      <p>Xuân Ất Tỵ 2026 - Vạn Sự Như Ý</p>
    </div>
  </div>
  <audio id="tetMusic" loop>
    <source src="./assets/music/cai-tet-giau.mp3" type="audio/mpeg" />
  </audio>
  <audio id="finishMusic" loop>
    <source src="./assets/music/happy-new-year.mp3" type="audio/mpeg" />
  </audio>

  <script>
    // --- Hiệu ứng Pháo Hoa (Canvas) ---
    const canvas = document.getElementById('fireworksCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let fireworksArr = [];
    let animationId;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Particle {
      constructor(x, y, color) {
        this.x = x; this.y = y; this.color = color;
        this.velocity = { x: (Math.random() - 0.5) * 8, y: (Math.random() - 0.5) * 8 };
        this.alpha = 1; this.friction = 0.96; this.gravity = 0.04;
      }
      draw() {
        ctx.save(); ctx.globalAlpha = this.alpha; ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2); ctx.fillStyle = this.color; ctx.fill(); ctx.restore();
      }
      update() {
        this.velocity.x *= this.friction; this.velocity.y *= this.friction;
        this.velocity.y += this.gravity; this.x += this.velocity.x; this.y += this.velocity.y;
        this.alpha -= 0.01;
      }
    }

    class Firework {
      constructor(x, y, targetY, color) {
        this.x = x; this.y = y; this.targetY = targetY; this.color = color;
        this.velocity = { x: 0, y: -Math.random() * 3 - 12 };
        this.exploded = false;
      }
      draw() {
        ctx.beginPath(); ctx.arc(this.x, this.y, 3, 0, Math.PI * 2); ctx.fillStyle = this.color; ctx.fill();
      }
      update() {
        this.y += this.velocity.y; this.velocity.y += 0.2;
        if (this.velocity.y >= 0 || this.y <= this.targetY) { this.exploded = true; this.explode(); }
      }
      explode() {
        for (let i = 0; i < 60; i++) particles.push(new Particle(this.x, this.y, this.color));
      }
    }

    function animateFireworks() {
      animationId = requestAnimationFrame(animateFireworks);
      ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
      if (Math.random() < 0.05) {
        const x = Math.random() * canvas.width;
        const color = `hsl(${Math.random() * 360}, 50%, 50%)`;
        fireworksArr.push(new Firework(x, canvas.height, Math.random() * canvas.height / 2, color));
      }
      fireworksArr.forEach((fw, i) => { fw.draw(); fw.update(); if (fw.exploded) fireworksArr.splice(i, 1); });
      particles.forEach((p, i) => { p.draw(); p.update(); if (p.alpha <= 0) particles.splice(i, 1); });
    }

    window.startFireworksEffect = function() {
      const fwDiv = document.getElementById('fireworks');
      fwDiv.style.display = 'flex';
      if (!animationId) animateFireworks();
      
      // Xử lý chuyển đổi âm thanh an toàn hơn
      const bgMusic = document.getElementById('tetMusic');
      const finishMusic = document.getElementById('finishMusic');
      
      finishMusic.currentTime = 0;
      finishMusic.play().then(() => {
        // Chỉ dừng nhạc nền khi nhạc chúc mừng đã thực sự bắt đầu phát
        bgMusic.pause();
      }).catch((e) => {
        console.warn("Lỗi phát nhạc chúc mừng:", e);
        // Nếu không phát được nhạc mới (ví dụ chưa có file), hãy đảm bảo nhạc nền được bật
        if (bgMusic.paused) bgMusic.play().catch(() => {});
      });
    };

    window.stopFireworksEffect = function() {
      const fwDiv = document.getElementById('fireworks');
      fwDiv.style.display = 'none';
      cancelAnimationFrame(animationId);
      animationId = null;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      fireworksArr = []; particles = [];

      // Dừng nhạc chúc mừng
      const finishMusic = document.getElementById('finishMusic');
      finishMusic.pause();
    };
  </script>
  <script src="script.js"></script>

  <img id="bottom-image" src="./assets/img/tet-nguyen-dan.png" alt="Gia đình luộc bánh chưng" />
</body>
</html>
